# ⚠️ КРИТИЧЕСКИ ВАЖНО: Site URL должен быть заполнен!

## Проблема

Redirect URLs добавлены правильно, но ошибка CORS все еще возникает.

**Причина:** Поле **Site URL** либо пустое, либо неправильно настроено.

## Решение

### Шаг 1: Проверьте поле "Site URL"

В Supabase Dashboard → Authentication → URL Configuration найдите поле:

```
Site URL
[________________________]  ← Это поле НЕ должно быть пустым!
```

### Шаг 2: Заполните Site URL

**В поле "Site URL" должно быть:**
```
http://localhost:3004
```

**Важно:**
- ✅ Начинается с `http://` (не `https://`)
- ✅ Без слэша в конце (не `http://localhost:3004/`)
- ✅ Порт `3004` (не `3000`)

### Шаг 3: Сохранение

В новых версиях Supabase Dashboard изменения могут сохраняться автоматически, но:

1. **После изменения Site URL:**
   - Нажмите где-то вне поля (чтобы потерять фокус)
   - Или нажмите Tab
   - Или найдите кнопку "Save" / "Update" рядом с полем

2. **Проверьте:**
   - Убедитесь, что после изменения поля Site URL видите индикатор сохранения
   - Может быть иконка "✓" или сообщение "Saved"

### Шаг 4: Если нет кнопки Save

Если кнопки "Save" нет внизу страницы:

1. **Проверьте, есть ли кнопка рядом с полем "Site URL"**
2. **Попробуйте нажать Enter после ввода URL**
3. **Попробуйте нажать Tab после ввода URL**
4. **Обновите страницу** - изменения могли сохраниться автоматически

### Шаг 5: После настройки Site URL

1. **Подождите 30 секунд** (изменения применяются)

2. **Перезапустите dev server:**
   ```bash
   # Остановите (Ctrl+C)
   cd finassistant-ai
   npm run dev
   ```

3. **Очистите кеш браузера:**
   - `Ctrl+Shift+R` (hard refresh)
   - Или откройте в инкогнито: `Ctrl+Shift+N`

4. **Попробуйте зарегистрироваться снова**

## Проверка

После заполнения Site URL и перезапуска сервера:

1. Откройте консоль браузера (F12)
2. Попробуйте зарегистрироваться
3. В консоли НЕ должно быть ошибки CORS

## Частые ошибки

❌ **Site URL пустой** → Заполните `http://localhost:3004`

❌ **Site URL с https** → Должно быть `http://` (не `https://`)

❌ **Site URL с слэшем** → Не должно быть `/` в конце

❌ **Site URL другой порт** → Должен быть `3004` (не `3000`)

## Текущая ситуация

✅ Redirect URLs настроены правильно:
- http://localhost:3004/**
- http://localhost:3004/auth/callback
- http://localhost:3004/dashboard

❓ **Проверьте Site URL:**
- Что написано в поле "Site URL"?
- Если пустое - заполните `http://localhost:3004`
- Если уже заполнено - сообщите, что там написано
