# Исправление ошибки "Failed to fetch"

## Что изменилось

Ошибка изменилась с "NetworkError" на "Failed to fetch". Это означает:
- ✅ CORS настройки, возможно, работают лучше
- ⚠️ Но есть другая проблема с подключением

## Возможные причины

### 1. Проект Supabase на паузе

**Самая вероятная причина** - проект автоматически приостановлен.

**Проверка:**
1. Откройте: https://supabase.com/dashboard
2. Проект "FinAssistant.ai"
3. **Проверьте статус** в верхней части страницы:
   - ✅ "Active" - проект активен
   - ❌ "Paused" - проект на паузе (нужно возобновить)

**Если проект на паузе:**
1. Нажмите кнопку "Resume" или "Unpause"
2. Дождитесь активации (1-2 минуты)
3. Попробуйте зарегистрироваться снова

### 2. Проблемы с сетью

**Проверка:**
1. Попробуйте открыть в браузере:
   ```
   https://zqqhzbthcqllbfnpgptpn.supabase.co/rest/v1/
   ```
2. **Если видите JSON ответ** (даже с ошибкой) - подключение работает
3. **Если "This site can't be reached"** - проект на паузе или сетевые проблемы

### 3. Firewall/Antivirus блокирует

**Проверка:**
- Временно отключите антивирус/firewall
- Попробуйте зарегистрироваться
- Если работает - добавьте исключение для `localhost:3004`

### 4. Проблемы с браузером

**Проверка:**
- Попробуйте другой браузер (Chrome, Firefox, Edge)
- Попробуйте в режиме инкогнито (`Ctrl+Shift+N`)

## Решение (пошагово)

### Шаг 1: Проверьте статус проекта Supabase

1. **Откройте Dashboard:**
   - https://supabase.com/dashboard
   - Проект "FinAssistant.ai"

2. **Проверьте статус:**
   - В верхней части страницы должно быть "Active"
   - Если "Paused" - нажмите "Resume" или "Unpause"

3. **Если проект был на паузе:**
   - Дождитесь активации (может занять 1-2 минуты)
   - В статусе должно появиться "Active"

### Шаг 2: Проверьте доступность Supabase

**Попробуйте открыть в новой вкладке браузера:**
```
https://zqqhzbthcqllbfnpgptpn.supabase.co/rest/v1/
```

**Ожидаемый результат:**
- Если видите JSON (даже с ошибкой типа `{"message":"..."}`) - подключение работает ✅
- Если видите "This site can't be reached" - проект на паузе ❌

### Шаг 3: Перезапустите сервер

После проверки/возобновления проекта:

```bash
# Остановите сервер (Ctrl+C)
cd finassistant-ai
npm run dev
```

### Шаг 4: Очистите кеш и попробуйте снова

1. **Hard refresh:** `Ctrl+Shift+R`
2. **Или откройте в инкогнито:** `Ctrl+Shift+N`
3. **Попробуйте зарегистрироваться**

### Шаг 5: Проверьте консоль браузера (детальная диагностика)

1. **Откройте DevTools (F12)**
2. **Вкладка "Network"**
3. **Попробуйте зарегистрироваться**
4. **Найдите запрос к `/auth/v1/signup`**
5. **Проверьте:**
   - **Status** (200 = OK, другие = проблема)
   - **Response** (что в ответе?)
   - **Headers** → Response Headers (есть ли `Access-Control-Allow-Origin`?)

## Диагностика

Если проблема сохраняется, сообщите:

1. **Статус проекта в Supabase Dashboard:**
   - "Active" или "Paused"?

2. **Что показывает браузер при открытии:**
   ```
   https://zqqhzbthcqllbfnpgptpn.supabase.co/rest/v1/
   ```

3. **Что показывает Network tab (F12 → Network):**
   - Статус запроса к `/auth/v1/signup`?
   - Что в Response?

4. **Полный текст ошибки из консоли:**
   - Скопируйте всю ошибку

## Частые случаи

### Случай 1: Проект на паузе

**Симптомы:**
- "Failed to fetch"
- При открытии Supabase URL видно "This site can't be reached"
- В Dashboard статус "Paused"

**Решение:**
1. Нажмите "Resume" в Dashboard
2. Дождитесь активации (1-2 минуты)
3. Попробуйте снова

### Случай 2: Проблемы с сетью

**Симптомы:**
- "Failed to fetch"
- Интернет работает, но Supabase недоступен

**Решение:**
1. Проверьте VPN (если используется)
2. Проверьте firewall/антивирус
3. Попробуйте другой браузер

### Случай 3: Неправильный URL

**Симптомы:**
- "Failed to fetch"
- Ошибка DNS или "This site can't be reached"

**Решение:**
1. Проверьте `.env.local` - URL должен быть `https://zqqhzbthcqllbfnpgptpn.supabase.co`
2. Перезапустите сервер после изменения

## Ожидаемый результат

После возобновления проекта (если был на паузе):

✅ Регистрация работает
✅ После регистрации перенаправление на `/dashboard`
✅ Нет ошибок в консоли
